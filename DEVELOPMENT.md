# 开发指南

## 热加载开发

### 启动开发服务器
```bash
# 普通开发模式
pnpm dev

# 调试模式（支持断点调试）
pnpm dev:debug
```

### 功能特性

✅ **热加载功能**：
- 自动监听文件变化
- 修改代码后自动重启服务
- 支持调试模式
- 智能忽略不需要监听的目录

### 监听的文件类型
- `*.js` - JavaScript文件
- `*.json` - 配置文件

### 忽略的目录/文件
- `node_modules/` - 依赖包
- `extracted_images/` - 提取的图片
- `uploads/` - 上传的临时文件
- `*.log` - 日志文件
- `*.md` - 文档文件

### 开发命令

```bash
# 生产环境启动
pnpm start

# 开发环境启动（热加载）
pnpm dev

# 调试模式启动
pnpm dev:debug

# 运行测试
pnpm test
```

### 调试技巧

1. **手动重启**：在终端输入 `rs` 然后回车
2. **查看日志**：nodemon会显示重启信息
3. **调试模式**：使用 `pnpm dev:debug` 启动，然后在浏览器打开 `chrome://inspect`

### 环境变量

开发环境会自动设置：
```bash
NODE_ENV=development
```

### 性能优化

- 延迟重启：1秒（避免频繁重启）
- 智能忽略：只监听必要的文件
- 颜色输出：便于区分日志类型

### 故障排除

如果热加载不工作：
1. 检查 `nodemon.json` 配置
2. 确认文件在监听列表中
3. 检查文件是否被忽略
4. 重启nodemon进程 